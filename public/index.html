<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sample Index Page</title>
</head>
<body>
	<div>FirefoxOSアプリ インストールサイト</div>

	<button id="install">
	  中国製素晴らしいアプリ
	</button>
	 
	<script>
	(function(){
	  function install(ev) {
	    ev.preventDefault();
	    // マニフェスト URL を定義
	    var manifest_url = "http://msakamaki.github.io/fxosdemo/manifest.webapp";
	    // アプリをインストール
	    var myapp = navigator.mozApps.install(manifest_url);
	    myapp.onsuccess = function(data) {
	      // アプリがインストールされたらボタンを削除
	      this.parentNode.removeChild(this);
	    };
	    myapp.onerror = function() {
	      // アプリがインストールされなかった場合、this.error.name に情報が含まれています
	      console.log('インストール失敗、エラー: ' + this.error.name);
	     };
	  };
	  // ボタンへの参照を取得し、クリック時に install() を呼び出します
	  var button = document.getElementById('install');
	  button.addEventListener('click', install, false);
	})();
	</script>
</body>
</html>